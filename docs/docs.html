<!--
SPDX-License-Identifier: Apache-2.0

Copyright 2025 Eaton

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and

File: docs.html
Description: # TODO: Add desc

Created: 1st August 2025
Last Modified: 30th October 2025
Version: v1.0.0
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMS Docs</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.2/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --background: 0 0% 100%;
            --foreground: 240 10% 3.9%;
            --card: 0 0% 100%;
            --card-foreground: 240 10% 3.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 240 10% 3.9%;
            --primary: 240 9% 7%;
            --primary-foreground: 0 0% 98%;
            --secondary: 240 4.8% 95.9%;
            --secondary-foreground: 240 5.9% 10%;
            --muted: 240 4.8% 95.9%;
            --muted-foreground: 240 3.8% 46.1%;
            --accent: 240 4.8% 95.9%;
            --accent-foreground: 240 5.9% 10%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 0 0% 98%;
            --border: 240 5.9% 90%;
            --input: 240 5.9% 90%;
            --ring: 240 10% 3.9%;
            --radius: 0.5rem;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: hsl(var(--background));
            color: hsl(var(--foreground));
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background-color: hsl(var(--card));
            border-right: 1px solid hsl(var(--border));
            padding: 2rem 1.5rem;
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            z-index: 10;
        }

        .sidebar h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: hsl(var(--foreground));
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section h3 {
            font-size: 0.875rem;
            font-weight: 600;
            color: hsl(var(--muted-foreground));
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 0.75rem;
            color: hsl(var(--muted-foreground));
            text-decoration: none;
            border-radius: calc(var(--radius) - 2px);
            transition: all 0.2s ease;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .nav-link:hover {
            background-color: hsl(var(--accent));
            color: hsl(var(--accent-foreground));
        }

        .nav-link.active {
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
        }

        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem 3rem;
            max-width: calc(100vw - 280px);
        }

        .content-section {
            display: none;
            max-width: 800px;
        }

        .content-section.active {
            display: block;
        }

        .content-section h1 {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: hsl(var(--foreground));
        }

        .content-section h2 {
            font-size: 1.875rem;
            font-weight: 600;
            margin: 2rem 0 1rem 0;
            color: hsl(var(--foreground));
            padding-bottom: 0.5rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .content-section h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem 0;
            color: hsl(var(--foreground));
        }

        .content-section h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 1rem 0 0.5rem 0;
            color: hsl(var(--foreground));
        }

        .content-section p {
            margin-bottom: 1rem;
            color: hsl(var(--foreground));
        }

        .content-section ul, .content-section ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .content-section li {
            margin-bottom: 0.5rem;
        }

        .content-section pre {
            background-color: hsl(var(--muted));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
        }

        .content-section code {
            background-color: hsl(var(--muted));
            padding: 0.25rem 0.375rem;
            border-radius: calc(var(--radius) - 2px);
            font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
            font-size: 0.875rem;
        }

        .content-section pre code {
            background: none;
            padding: 0;
        }

        .alert {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: var(--radius);
            border-left: 4px solid;
        }

        .alert-info {
            background-color: hsl(221 91% 91%);
            border-color: hsl(221 83% 53%);
            color: hsl(221 39% 11%);
        }

        .alert-warning {
            background-color: hsl(48 96% 89%);
            border-color: hsl(48 96% 53%);
            color: hsl(25 5.3% 44.7%);
        }

        .alert-success {
            background-color: hsl(149 80% 90%);
            border-color: hsl(149 80% 53%);
            color: hsl(150 5.9% 30.1%);
        }

        .card {
            background-color: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .card-header {
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid hsl(var(--border));
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: hsl(var(--card-foreground));
        }

        .card-description {
            color: hsl(var(--muted-foreground));
            margin-top: 0.5rem;
        }

        .mobile-toggle {
            display: none;
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 20;
            background-color: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            border: none;
            border-radius: var(--radius);
            padding: 0.5rem;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .mobile-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                max-width: 100vw;
                padding: 4rem 1.5rem 2rem 1.5rem;
            }
        }

        .hljs {
            background: hsl(var(--muted)) !important;
        }

        blockquote {
            border-left: 4px solid hsl(var(--border));
            padding-left: 1rem;
            margin: 1rem 0;
            color: hsl(var(--muted-foreground));
            font-style: italic;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid hsl(var(--border));
            padding: 0.5rem 0.75rem;
            text-align: left;
        }

        th {
            background-color: hsl(var(--muted));
            font-weight: 600;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            border-radius: 9999px;
            padding: 0.25rem 0.625rem;
            font-size: 0.75rem;
            font-weight: 600;
            background-color: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
        }
    </style>
</head>
<body>
    <button class="mobile-toggle" onclick="toggleSidebar()">â˜°</button>
    
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <h1>EMS Documentation</h1>
            
            <div class="nav-section">
                <h3>Getting Started</h3>
                <a href="#introduction" class="nav-link active">Introduction</a>
                <a href="#installation" class="nav-link">Installation</a>
                <a href="#quick-start" class="nav-link">Quick Start</a>
            </div>
        </nav>
        
        <main class="main-content">
            <!-- Introduction Section -->
            <section id="introduction" class="content-section active">
                <h1>Introduction</h1>
                <p class="lead">Welcome to the documentation for Energy Management System (EMS) for SHIFT2DC Project. This guide will help to get started quickly and provide comprehensive reference material.</p>
                                
                <h2>Features</h2>
                <p>EMS includes the following key features:</p>
                <ul>
                    <li>Modern user interface to configure and monitor energy assets</li>
                    <li>Modbus configuration to adapt system to the assets which are installed in the building/microgrid</li>
                    <li>Optimization module which provides reference setpoints for energy assets</li>
                    <li>Historical data logging via database integration</li>
                </ul>
                
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Quick Overview</div>
                        <div class="card-description">Get up and running in minutes</div>
                    </div>
                    <p>Follow the installation guide to set up the EMS.</p>
                </div>
            </section>
            
            <!-- Installation Section -->
            <section id="installation" class="content-section">
                <h1>Installation</h1>
                <p>Follow these steps to install and set up EMS locally.</p>
                
                <h2>Prerequisites</h2>
                <h3>Software</h3>
                <p>Before you begin, ensure you have the following installed:</p>
                <ul>
                    <li>Node.js v22.12.0 LTS (Versions higher than v22 also can be installed, however the EMS was tested on this specific release of Node.js)</li>
                    <li>PostgreSQL v16 (During the installation make sure that PSQL terminal is installed)</li>
                    <li>Python v3.12 (This exact release of Python is needed because of the availability of CPLEX Python package for optimization)</li>
                    <li>Git</li>
                </ul>
                <h3>Hardware</h3>
                <p>EMS can run on any modern computer with at least 8GB of RAM. For long-term use, consider a server with higher specifications. The EMS must be deployed on the machine with Windows 11.</p>
                <div class="alert alert-info">
                    <strong>Note:</strong> High amount of RAM is recommended, since the current version of EMS requires Windows 11 on the machine.
                </div>
                
                <h2>Clone the Repository</h2>
                <p>Select a folder which will contain all the resources for the EMS. As an example a <code>1_SHIFT2DC</code> folder can be created in the following directory: <code>C:\Users\YOUR_USER\Documents\1_SHIFT2DC</code></p>
                <p>Open the created folder and right click in the File Explorer to reveal the menu. In the opened menu select <code>Open in Terminal</code></p>
                <p>In the opened terminal proceed with the following commands:</p>
                <pre><code class="language-bash"># Create a "1_EMS" folder
mkdir "1_EMS"
# Create a "1_1_EMS Data" folder
mkdir "1_1_EMS Data"
cd "1_EMS"
git clone https://github.com/SHIFT2DC/EMS.git
cd "EMS"</code></pre>
                
                <h2>Install Dependencies</h2>
                <h3>Web-application dependencies:</h3>
                <p>With the terminal opened in <code>C:\Users\YOUR_USER\Documents\1_SHIFT2DC\1_EMS\EMS</code> install needed packages for web-application:</p>
                <pre><code class="language-bash"># Using npm
cd web-app/frontend/
npm install --verbose
</code></pre>
                <div class="alert alert-warning">
                    <strong>Warning:</strong> There is a probability that running scripts on your system is disabled. If such error is encountered then run the following command in the terminal and then enter <code>Y</code> to confirm the change:
                    <pre><code class="language-bash">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned</code></div>
                <h2>Configure other dependencies:</h2>
                <h3><code>.env</code> environment variables configuration</h3>
                <div class="alert alert-warning">
                    <strong>Warning:</strong> Make sure to copy the environment variables from <code>.env.example</code> to <code>.env</code> before running the application.
                </div>
                <p>Those <code>.env</code> files can be found in <code>EMS/web-app/frontend/.env</code> and <code>EMS/web-app/backend/.env</code></p>
                <h4>How to configure <code>VITE_BASE_URL</code> in <code>EMS/web-app/frontend/.env</code></h4>
                <p>The <code>VITE_BASE_URL</code> variable defines where the backend server is hosted. If the backend server is hosted locally then the variable should be set to <code>http://localhost:3001</code></p>
                <h3>Python virtual environment set up</h3>
                <p>With terminal navigate to the <code>EMS/system-coordination</code> folder</p>
                <p>Validate what version of Python are installed on the machine and create a Python virtual environment:</p>
                <pre><code class="language-bash"># List available Python Versions
py -0

# Create virtual environment with 3.12 version
py -3.12 -m venv sys-coord

# Install needed packages:
py -m pip install -r requirements.txt</code></pre>
                <p>You can validate whether the virtual environment set up was Initialized correctly:</p>
                <pre><code class="language-bash"># Activate
sys-coord\Scripts\activate

# Verify 3.12 version is active
python --version</code></pre>
                <h3>Initialize database cluster:</h3>
                <p>Locate where PostgreSQL was installed on the machine. Usually the installation directory is the following: <code>C:\Program Files\PostgreSQL\16</code></p>
                <p>Open a new terminal and proceed with initialization:</p>
                <pre><code class="language-bash"># Run the initialization of the cluster
&"C:\Program Files\PostgreSQL\16\bin\initdb.exe" -D "C:\Users\YOUR_USER\Documents\1_SHIFT2DC\1_1_EMS Data"</code></pre>
                <div class="alert alert-info">
                    <strong>Note:</strong> Make sure to check the installation directory of the PostgreSQL and the path to the <code>1_1_EMS Data</code> folder, so that the initialization is done correctly.
                </div>
                <div class="alert alert-warning">
                    <strong>Warning:</strong> Make sure to create a password for the database and then pass this password into the <code>EMS/web-app/backend/.env</code>
                </div>
                <p></p>

                <h4>Creating tables in the database:</h4>
                <p>It is required to create tables in the initialized database cluster.</p>
                <p>Open the PSQL terminal, which was installed together with the PostgreSQL. This terminal may be located by default in <code>C:\Program Files\PostgreSQL\17\scripts\runpsql.bat</code></p>
                <p>In this terminal connect to the initialized cluster with the correct credentials.</p>
                <p>When successfully connected proceed with the following commands in the terminal:</p>
                <pre><code class="language-bash"># Create a new database:
CREATE DATABASE "ems-db";

# Connect to the newly created database:
\c "ems-db"

# Create table for measurements:
CREATE TABLE measurements (
    id BIGSERIAL PRIMARY KEY,
    measurement_id INT NOT NULL,
    time TIMESTAMP NOT NULL DEFAULT now(),
    parameter TEXT NOT NULL,       
    value DOUBLE PRECISION NOT NULL,
    unit TEXT NOT NULL,            
    quality TEXT
);

# Create table for optimization inputs and outputs:
CREATE TABLE "ems-inputs" (
    id BIGSERIAL PRIMARY KEY,
    input_id INT NOT NULL,
    time TIMESTAMP NOT NULL DEFAULT now(),
    parameter TEXT NOT NULL,       
    value DOUBLE PRECISION NOT NULL,
    unit TEXT NOT NULL,            
    quality TEXT
);

CREATE TABLE "ems-outputs" (
    id BIGSERIAL PRIMARY KEY,
    output_id INT NOT NULL,
    time TIMESTAMP NOT NULL DEFAULT now(),
    parameter TEXT NOT NULL,       
    value DOUBLE PRECISION NOT NULL,
    unit TEXT NOT NULL,            
    quality TEXT
);

# Exit when done:
\q

</code></pre>
            </section>
            
            <!-- Quick Start Section -->
            <section id="quick-start" class="content-section">
                <h1>Quick Start</h1>
                <p>After all dependencies are installed and configured there are several small steps left to make the EMS running.</p>
                
                <h2>Configure EMS launcher.</h2>
                <p>The launcher (<code>EMS/ems-launcher.bat</code>) needs to be updated with the proper directories</p>
                <p>Open <code>ems-launcher.bat</code> with Notepad or any other text editor. Locate the following lines:</p>
                <pre><code class="language-bash">:: Start PostgreSQL
echo %BOLD%%BLUE%[1/4] Starting PostgreSQL server...%RESET%
start "PostgreSQL Server" cmd /k "echo %MAGENTA%PostgreSQL Server%RESET% && pg_ctl.exe start -D "C:\Users\YOUR_USER\Documents\1_SHIFT2DC\1_1_EMS Data" && echo %GREEN%PostgreSQL started successfully!%RESET%"
timeout /t 3 /nobreak >nul</code></pre>
                <p>Modify the <code>"C:\Users\YOUR_USER\Documents\1_SHIFT2DC\1_1_EMS Data"</code> directory to match your set up.</p>
                
                <h2>Launching the EMS</h2>
                <p>If everything was configured properly the EMS can be launched via the <code>ems-launcher.bat</code> by double-clicking the file.</p>
                <p>The launcher should verify if all prerequisites were installed and then it will open 4 terminals:</p>
                <ul>
                    <li>PostgreSQL Server</li>
                    <li>Backend Server - node server</li>
                    <li>Python Coordinator</li>
                    <li>Frontend Server</li>
                </ul>                
                <p>When all 4 terminal are started, the EMS should be available in the browser at <code>http://localhost:5173</code></p>
            </section>
        </main>
    </div>

    <script>
        // Navigation functionality
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            // Add active class to clicked nav link
            const targetLink = document.querySelector(`a[href="#${sectionId}"]`);
            if (targetLink) {
                targetLink.classList.add('active');
            }
            
            // Close mobile sidebar
            document.getElementById('sidebar').classList.remove('open');
        }
        
        // Add click handlers to navigation links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('href').substring(1);
                showSection(sectionId);
            });
        });
        
        // Mobile sidebar toggle
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }
        
        // Initialize syntax highlighting
        hljs.highlightAll();
        
        // Custom markdown renderer for sections (optional - for dynamic content)
        function renderMarkdown(content, targetId) {
            const target = document.getElementById(targetId);
            if (target) {
                target.innerHTML = marked.parse(content);
                // Re-highlight code blocks
                target.querySelectorAll('pre code').forEach(block => {
                    hljs.highlightElement(block);
                });
            }
        }
        
        // Example usage of markdown rendering:
        // renderMarkdown('## Hello World\nThis is **markdown** content!', 'introduction');
    </script>
</body>
</html>